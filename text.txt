// Открытие попапа
const openPopup = (popup) => {
  popup.classList.add('popup_opened');

  document.addEventListener('keydown', closePopupEscapePressed);
};

// Закрытие попапа
const closePopup = (popup) => {
  popup.classList.remove('popup_opened');

  document.removeEventListener('keydown', closePopupEscapePressed);
};

// Закрытие попапа при нажатии клавиши "Escape"
const closePopupEscapePressed = (e) => {
  if(e.key === 'Escape') {
    const popupOpened = document.querySelector('.popup_opened');

    closePopup(popupOpened);
  };
};



// Закрытие попапов при клике по оверлею
popups.forEach(popup => {
  popup.addEventListener('click', e => {
    const closeButton = popup.querySelector('.popup__cross')

    if(e.target === e.currentTarget || e.target === closeButton) {
      closePopup(popup);
    };
  });
});



cardPopupForm.addEventListener('submit', (e) => {
  const newCard = new Section({
    items: [{
      name: userInputTitle.value,
      link: userInputPicture.value
    }],
    renderer: (initialCard) => {
      const card = new Card(initialCard, '#new-card', handleCardClick);
    
      const cardElement = card.generateCard();
    
      newCard.addItem(cardElement);
    }
  }, '.photo-grid');
  
  newCard.renderItems();

  e.target.reset();
});